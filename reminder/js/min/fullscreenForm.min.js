!function(t){"use strict";function e(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function s(t,e){var s=document.createElement(t);return e&&(e.cName&&(s.className=e.cName),e.inner&&(s.innerHTML=e.inner),e.appendTo&&e.appendTo.appendChild(s)),s}function i(t,s){this.el=t,this.options=e({},this.options),e(this.options,s),this._init()}var r={animations:Modernizr.cssanimations},n={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},o=n[Modernizr.prefixed("animation")];i.prototype.options={ctrlProgress:!0,ctrlNavDots:!0,ctrlNavPosition:!0,onReview:function(){return!1}},i.prototype._init=function(){this.formEl=this.el.querySelector("form"),this.fieldsList=this.formEl.querySelector("ol.fs-fields"),this.current=0,this.fields=[].slice.call(this.fieldsList.children),this.fieldsCount=this.fields.length,classie.add(this.fields[this.current],"fs-current"),this._addControls(),this._addErrorMsg(),this._initEvents()},i.prototype._addControls=function(){if(this.ctrls=s("div",{cName:"fs-controls",appendTo:this.el}),this.ctrlContinue=s("button",{cName:"fs-continue",inner:"Continue",appendTo:this.ctrls}),this._showCtrl(this.ctrlContinue),this.options.ctrlNavDots){this.ctrlNav=s("nav",{cName:"fs-nav-dots",appendTo:this.ctrls});for(var t="",e=0;e<this.fieldsCount;++e)t+=e===this.current?'<button class="fs-dot-current"></button>':"<button disabled></button>";this.ctrlNav.innerHTML=t,this._showCtrl(this.ctrlNav),this.ctrlNavDots=[].slice.call(this.ctrlNav.children)}this.options.ctrlNavPosition&&(this.ctrlFldStatus=s("span",{cName:"fs-numbers",appendTo:this.ctrls}),this.ctrlFldStatusCurr=s("span",{cName:"fs-number-current",inner:Number(this.current+1)}),this.ctrlFldStatus.appendChild(this.ctrlFldStatusCurr),this.ctrlFldStatusTotal=s("span",{cName:"fs-number-total",inner:this.fieldsCount}),this.ctrlFldStatus.appendChild(this.ctrlFldStatusTotal)),this.options.ctrlProgress&&(this.ctrlProgress=s("div",{cName:"fs-progress",appendTo:this.ctrls}),this._showCtrl(this.ctrlProgress))},i.prototype._addErrorMsg=function(){this.msgError=s("span",{cName:"fs-message-error",appendTo:this.el})},i.prototype._initEvents=function(){var t=this;this.ctrlContinue.addEventListener("click",function(){t._nextField()}),this.options.ctrlNavDots&&this.ctrlNavDots.forEach(function(e,s){e.addEventListener("click",function(){t._showField(s)})}),this.fields.forEach(function(e){if(e.hasAttribute("data-input-trigger")){var s=e.querySelector('input[type="radio"]')||e.querySelector("select");if(!s)return;switch(s.tagName.toLowerCase()){case"select":s.addEventListener("change",function(){t._nextField()});break;case"input":[].slice.call(e.querySelectorAll('input[type="radio"]')).forEach(function(e){e.addEventListener("change",function(){t._nextField()})})}}}),document.addEventListener("keydown",function(e){if(!t.isLastStep&&"textarea"!==e.target.tagName.toLowerCase()){var s=e.keyCode||e.which;13===s&&(e.preventDefault(),t._nextField())}})},i.prototype._nextField=function(t){if(this.isLastStep||!this._validade()||this.isAnimating)return!1;this.isAnimating=!0,this.isLastStep=this.current===this.fieldsCount-1&&void 0===t?!0:!1,this.secondLast=this.current===this.fieldsCount-2&&void 0===t?!0:!1,this._clearError();var e=this.fields[this.current];if(this.navdir=void 0!==t?t<this.current?"prev":"next":"next",this.current=void 0!==t?t:this.current+1,void 0===t&&(this._progress(),this.farthest=this.current),classie.add(this.fieldsList,"fs-display-"+this.navdir),classie.remove(e,"fs-current"),classie.add(e,"fs-hide"),!this.isLastStep){this._updateNav(),this._updateFieldNumber();var s=this.fields[this.current];classie.add(s,"fs-current"),classie.add(s,"fs-show")}if(this.secondLast){console.log("second");var n=$("button.fs-continue");n.text("Submit"),n.hover(function(t){$(this).css("color","mouseenter"===t.type?"white":"#774478")})}if(this.isLastStep){$(".form-done").addClass("fs-show"),$(".form-done").animate({opacity:1},4e3);try{$.post("http://requestb.in/1b63nqk1",$("form").serialize())}catch(a){}$(".form-done").animate({opacity:0},600),setTimeout(function(){$("form").trigger("reset"),$(".form-done").animate({opacity:0},600),$(".fs-fields").addClass("fs-display-next"),$($(".fs-fields").find("li")[0]).addClass("fs-current"),$(".overview .fs-form-wrap").height("100%");var t=document.getElementById("fs-form-wrap");new i(t,{})},4e3)}var l=this,c=function(){r.animations&&this.removeEventListener(o,c),classie.remove(l.fieldsList,"fs-display-"+l.navdir),classie.remove(e,"fs-hide"),l.isLastStep?(l._hideCtrl(l.ctrlNav),l._hideCtrl(l.ctrlProgress),l._hideCtrl(l.ctrlContinue),l._hideCtrl(l.ctrlFldStatus),console.log(l),l.options.onReview()):(classie.remove(s,"fs-show"),l.options.ctrlNavPosition&&(l.ctrlFldStatusCurr.innerHTML=l.ctrlFldStatusNew.innerHTML,l.ctrlFldStatus.removeChild(l.ctrlFldStatusNew),classie.remove(l.ctrlFldStatus,"fs-show-"+l.navdir))),l.isAnimating=!1};r.animations?"next"===this.navdir?this.isLastStep?e.querySelector(".fs-anim-upper").addEventListener(o,c):s.querySelector(".fs-anim-lower").addEventListener(o,c):s.querySelector(".fs-anim-upper").addEventListener(o,c):c()},i.prototype._showField=function(t){return t===this.current||0>t||t>this.fieldsCount-1?!1:(this._nextField(t),void 0)},i.prototype._updateFieldNumber=function(){if(this.options.ctrlNavPosition){this.ctrlFldStatusNew=document.createElement("span"),this.ctrlFldStatusNew.className="fs-number-new",this.ctrlFldStatusNew.innerHTML=Number(this.current+1),this.ctrlFldStatus.appendChild(this.ctrlFldStatusNew);var t=this;setTimeout(function(){classie.add(t.ctrlFldStatus,"next"===t.navdir?"fs-show-next":"fs-show-prev")},25)}if(!this.isLastStep){var e=$("button.fs-continue");e.text("Continue"),e.hover(function(t){$(this).css("color","mouseenter"===t.type?"white":"#774478")})}},i.prototype._progress=function(){this.options.ctrlProgress&&(this.ctrlProgress.style.width=this.current*(100/this.fieldsCount)+"%")},i.prototype._updateNav=function(){this.options.ctrlNavDots&&(classie.remove(this.ctrlNav.querySelector("button.fs-dot-current"),"fs-dot-current"),classie.add(this.ctrlNavDots[this.current],"fs-dot-current"),this.ctrlNavDots[this.current].disabled=!1)},i.prototype._showCtrl=function(t){classie.add(t,"fs-show")},i.prototype._hideCtrl=function(t){classie.remove(t,"fs-show")},i.prototype._validade=function(){var t,e=this.fields[this.current],s=e.querySelector("input[required]")||e.querySelector("textarea[required]")||e.querySelector("select[required]");if(!s)return!0;switch(s.tagName.toLowerCase()){case"input":if("radio"===s.type||"checkbox"===s.type){var i=0;[].slice.call(e.querySelectorAll('input[type="'+s.type+'"]')).forEach(function(t){t.checked&&++i}),i||(t="NOVAL")}else""===s.value&&(t="NOVAL");break;case"select":(""===s.value||"-1"===s.value)&&(t="NOVAL");break;case"textarea":""===s.value&&(t="NOVAL")}return void 0!=t?(this._showError(t),!1):!0},i.prototype._showError=function(t){var e="";switch(t){case"NOVAL":e="Please fill the field before continuing";break;case"INVALIDEMAIL":e="Please fill a valid email address"}this.msgError.innerHTML=e,this._showCtrl(this.msgError)},i.prototype._clearError=function(){this._hideCtrl(this.msgError)},t.FForm=i}(window);